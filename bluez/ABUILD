# ABUILD generated by spkg2abuild converter from bluez-4.60-1.spkg

pkgname=bluez
pkgver=5.21
pkgbuild=2
arch="auto"

shortdesc=("Bluetooth userspace utilities")
longdesc=("BlueZ provides support for the core Bluetooth layers and protocols. It is flexible, efficient and uses a modular implementation.")

source=("http://www.kernel.org/pub/linux/bluetooth/bluez-${pkgver}.tar.gz")

tags="network net-wireless"

build_deps="make gcc coreutils binutils sed grep pkg-config libical"

BUILD_SYSTEM="autotools"

BUILD_KEYS="--prefix=/usr \
--libdir=/usr/lib${LIBDIRSUFFIX} \
--mandir=/usr/man \
--sysconfdir=/etc \
--localstatedir=/var \
--enable-tools \
--disable-systemd \
--enable-cups \
--with-udevdir=/etc/udev \
--enable-library"

after_build() {
  # Patch default bluetooth group from lp to netdev
  cat ${filedir}/bluetooth.conf > ${pkgdir}/etc/dbus-1/system.d/bluetooth.conf
  install -Dm755 ${filedir}/bluetooth-init.d ${pkgdir}/etc/init.d/bluetooth
  install -Dm644 ${filedir}/bluetooth-conf.d ${pkgdir}/etc/conf.d/bluetooth.new
}

