#ABUILD created by/создан: khvalera, khvalera at narod.ru 

pkgname=indy
pkgver=10.2.0.3
pkgbuild=1
arch=('auto')
FPCVER=$(fpc -iV)
LAZVER=$(A=$(lazarus -v); echo ${A::8})

shortdesc="Indy.Sockets (FreePascal Version)"

source=("http://www.indyproject.org/Sockets/fpc/${pkgname}-${pkgver}.tar.gz")

tags="dev-util develop"

build_deps="fpc lazarus"

adddep="fpc=${FPCVER} lazarus"

custom_opts="no_strip"

build(){
  go_src_dir
  install -m 775 -d ${pkgdir}/usr/share/fpc/${FPCVER}/src/packages || exit 1
  install -m 775 -d ${pkgdir}/usr/lib${LIBDIRSUFFIX}/lazarus/components || exit 1
  cp -R fpc ${pkgdir}/usr/share/fpc/${FPCVER}/src/packages/indy
  cp -R lazarus ${pkgdir}/usr/lib${LIBDIRSUFFIX}/lazarus/components/indy
  rm -R ${pkgdir}/usr/share/fpc/${FPCVER}/src/packages/indy/debian
  echo "End build"
}
