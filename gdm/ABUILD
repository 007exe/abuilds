# ABUILD generated by spkg2abuild converter from gdm-2.20.10-1.spkg

# Package metadata
pkgname=gdm
pkgver=2.20.10
pkgbuild=18
arch="auto"

# Package description
shortdesc=("Gnome display manager - legacy version.")
longdesc=("Gnome display manager - old legacy version. Simple and lightweight display manager for X11.")

# Source URL
source=("http://ftp.gnome.org/pub/gnome/sources/gdm/2.20/gdm-${pkgver}.tar.bz2")

# Tags
tags="xapps gnome-base"

# Manually-added dependencies
adddep=""

# Build system
BUILD_SYSTEM="autotools"
BUILD_KEYS="--prefix=/usr \
--bindir=/usr/bin \
--sbindir=/usr/sbin \
--libexecdir=/usr/libexec \
--includedir=/usr/include \
--mandir=/usr/man \
--infodir=/usr/info \
--libdir=/usr/lib${LIBDIRSUFFIX} \
--sysconfdir=/etc \
--localstatedir=/var \
--disable-scrollkeeper"


after_build() {
	set -e
	mkdir -p ${pkgdir}/etc/init.d
	install -m0755 $filedir/gdm.init ${pkgdir}/etc/init.d/gdm
	rm ${pkgdir}/etc/pam.d/*
	install -m644 $filedir/pam.d/gdm $pkgdir/etc/pam.d/gdm
	install -m644 $filedir/pam.d/gdm-autologin $pkgdir/etc/pam.d/gdm-autologin
	( cd ${pkgdir}/usr/share/gdm/themes ; tar xf ${filedir}/AgiliaLinux.tar.xz )
	install -m644 ${filedir}/share/defaults.conf ${pkgdir}/usr/share/gdm/defaults.conf
	install -m644 ${filedir}/share/factory-defaults.conf ${pkgdir}/usr/share/gdm/factory-defaults.conf
	set +e
}

