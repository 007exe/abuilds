# ABUILD generated by mkpkg_generator.sh

pkgname=redland
pkgver=1.0.15
pkgbuild=1
arch=("auto")

shortdesc=("redland (RDF high-level interface library)")
longdesc=("Redland is a library that provides a high-level interface for the Resource Description Framework (RDF) allowing the RDF graph to be parsed from XML, stored, queried and manipulated. Redland implements each of the RDF concepts in its own class via an object based API, reflected into the language APIs, currently C Perl, PHP, Python, Ruby and Tcl. Homepage: http://librdf.org/")

tags=("dev-libs libs")

source=("http://download.librdf.org/source/redland-${pkgver}.tar.gz")

BUILD_KEYS="--prefix=/usr \
	--enable-release \
	--libdir=/usr/lib${LIBDIRSUFFIX} \
	--with-included-ltdl=no \
	--docdir=/usr/doc \
	--mandir=/usr/man \
	--disable-static \
	--with-raptor=system \
	--with-rasqal=system \
	--with-bdb-lib=/usr/lib${LIBDIRSUFFIX} \
	--with-threads \
	--localstatedir=/var \
	--sysconfdir=/etc \
	--with-sqlite=3"


build() {
	go_src_dir
	burn_patches
	set -e
	CFLAGS="$SLKCFLAGS" ./configure $BUILD_KEYS

	# Prevent error "No rule to make target `-lltdl', needed by `librdf.la'"
	sed -i -e 's# -lltdl$# #' -e '/^LIBS =/s# = # = -lltdl #' src/Makefile
	
	make -j${numjobs}
	make install DESTDIR=${pkgdir}
	
	set +e
}


