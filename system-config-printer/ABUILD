# ABUILD generated by mkpkg_generator.sh

pkgname=system-config-printer
pkgver=1.3.9
pkgbuild=1
arch=("auto")

shortdesc=("Printer configuration tool")
longdesc=("The purpose of the tool is to configure a CUPS server (often the local machine) using the CUPS API. The tool is written in Python, using pygtk for the graphical parts and with some Python bindings (pycups) for the CUPS API.It is largely the same as using the CUPS web interface for configuring printers, but has the advantage of being a native application rather than a web page.")

adddep="pycups dbus-python"
tags=("net-print xapps")

source=("http://cyberelk.net/tim/data/${pkgname}/1.3/${pkgname}-${pkgver}.tar.xz")

build_deps="python"

BUILD_SYSTEM="autotools"
BUILD_KEYS="--prefix=/usr --sbindir=/usr/bin --sysconfdir=/etc --with-udev-rules"
INSTALL_KEYS="DESTDIR=$pkgdir"

after_build() {
	set -e
	# Add symlink to /lib/udev for udev-printer-config
	mkdir -p ${pkgdir}/lib/udev
	for i in udev-configure-printer udev-add-printer ; do
		mv -v ${pkgdir}/etc/udev/$i ${pkgdir}/lib/udev/$i
		( cd ${pkgdir}/etc/udev ; ln -svf ../../lib/udev/$i . )
	done
	set +e
}
